# ============================================================================
# Printernizer Environment Configuration
# ============================================================================
# This template is for DOCKER and HOME ASSISTANT deployments.
# Paths like /app/data/ are container paths.
#
# For LOCAL DEVELOPMENT (Python standalone), use src/.env.development instead:
#   cp src/.env.development src/.env
#
# For Docker/HA: Copy this file to .env and customize for your deployment.
#
# Legend:
#   [REQUIRED] - Must be set for application to function
#   [OPTIONAL] - Has sensible defaults, customize if needed
#   [UNUSED]   - Defined but not currently used (future features)
# ============================================================================

# ============================================================================
# Core Application Settings
# ============================================================================

# [REQUIRED] Application environment (production, development, test)
ENVIRONMENT=production

# [OPTIONAL] Application debug mode (default: false in production)
DEBUG=false

# [OPTIONAL] API port (default: 8000)
PORT=8000

# [OPTIONAL] Log level (debug, info, warning, error, critical)
# Default: info
LOG_LEVEL=info

# [INTERNAL] Home Assistant Ingress detection (auto-set by HA)
# Do not manually set this variable
# HA_INGRESS=true

# [INTERNAL] Home Assistant supervisor token (auto-set by HA)
# Do not manually set this variable
# HASSIO_TOKEN=<auto-set-by-ha>

# [OPTIONAL] Deployment mode detection (standalone, docker, homeassistant)
# Auto-detected based on environment, rarely needs manual setting
# DEPLOYMENT_MODE=standalone

# ============================================================================
# Server Configuration
# ============================================================================

# [OPTIONAL] Bind address (default: 0.0.0.0 for Docker)
HOST=0.0.0.0

# [OPTIONAL] Number of uvicorn workers (default: 4)
# Increase for high-traffic deployments
WORKERS=4

# [OPTIONAL] Disable hot-reload in development (default: false)
# Set to "true" to disable auto-reload
# DISABLE_RELOAD=false

# ============================================================================
# Database Configuration
# ============================================================================

# [REQUIRED] Database file path (container path for Docker/HA)
DATABASE_PATH=/app/data/printernizer.db

# [OPTIONAL] Automatic database backup interval in hours (default: 24)
DATABASE_BACKUP_INTERVAL=24

# [OPTIONAL] Database backup retention in days (default: 90)
DATABASE_RETENTION_DAYS=90

# ============================================================================
# File Storage Configuration
# ============================================================================

# [OPTIONAL] Maximum upload file size in MB (default: 100)
MAX_FILE_SIZE_MB=100

# [REQUIRED] Upload directory path (container path for Docker/HA)
UPLOAD_PATH=/app/uploads

# [REQUIRED] Library storage path (container path for Docker/HA)
LIBRARY_PATH=/app/data/library

# [REQUIRED] Downloads directory path (container path for Docker/HA)
DOWNLOADS_PATH=/app/data/downloads

# [OPTIONAL] Allowed file extensions (default: .3mf,.stl,.obj,.gcode)
ALLOWED_FILE_TYPES=.3mf,.stl,.obj,.gcode

# ============================================================================
# Printer Discovery Configuration
# ============================================================================

# [OPTIONAL] Enable automatic printer discovery (default: true)
DISCOVERY_ENABLED=true

# [OPTIONAL] Run printer discovery on startup (default: true)
DISCOVERY_RUN_ON_STARTUP=true

# [OPTIONAL] Startup delay before discovery in seconds (default: 60)
# Prevents startup delays while still discovering printers soon after boot
DISCOVERY_STARTUP_DELAY_SECONDS=60

# [OPTIONAL] Discovery timeout in seconds (default: 10)
DISCOVERY_TIMEOUT_SECONDS=10

# [OPTIONAL] Periodic discovery scan interval in minutes (default: 60)
# DISCOVERY_SCAN_INTERVAL_MINUTES=60

# ============================================================================
# Printer Integration Settings
# ============================================================================

# Bambu Lab Settings
# [OPTIONAL] Default connection timeout in seconds (default: 30)
BAMBU_DEFAULT_TIMEOUT=30

# [OPTIONAL] Number of connection retry attempts (default: 3)
BAMBU_RETRY_ATTEMPTS=3

# [OPTIONAL] MQTT keepalive interval in seconds (default: 60)
BAMBU_MQTT_KEEPALIVE=60

# Prusa Settings
# [OPTIONAL] Default API timeout in seconds (default: 30)
PRUSA_DEFAULT_TIMEOUT=30

# [OPTIONAL] Number of API retry attempts (default: 3)
PRUSA_RETRY_ATTEMPTS=3

# [OPTIONAL] Status polling interval in seconds (default: 30)
PRUSA_POLL_INTERVAL=30

# ============================================================================
# Business & Analytics Settings (German 3D Printing Service)
# ============================================================================

# [OPTIONAL] Timezone for timestamps and reports (default: UTC)
# Common values: Europe/Berlin, America/New_York, Asia/Tokyo
TIMEZONE=Europe/Berlin

# [OPTIONAL] Currency for cost calculations (default: EUR)
CURRENCY=EUR

# [OPTIONAL] VAT rate for invoicing (default: 0.19 = 19% German VAT)
VAT_RATE=0.19

# [OPTIONAL] Business name for reports and invoices
# BUSINESS_NAME=Your Business Name

# [OPTIONAL] Business location for reports
# BUSINESS_LOCATION=Your Location

# ============================================================================
# Feature Flags
# ============================================================================

# [OPTIONAL] Enable 3D model preview rendering (default: true)
ENABLE_3D_PREVIEW=true

# [OPTIONAL] Enable analytics export features (default: true)
ENABLE_ANALYTICS_EXPORT=true

# [OPTIONAL] Enable business reporting features (default: true)
ENABLE_BUSINESS_REPORTS=true

# [OPTIONAL] Enable file synchronization features (default: true)
ENABLE_FILE_SYNC=true

# ============================================================================
# G-Code Preview Optimization
# ============================================================================

# [OPTIONAL] Optimize G-code rendering (show print moves only, default: true)
GCODE_OPTIMIZE_PRINT_ONLY=true

# [OPTIONAL] Max lines to optimize (default: 1000)
GCODE_OPTIMIZATION_MAX_LINES=1000

# [OPTIONAL] Max lines to render in preview (default: 10000)
GCODE_RENDER_MAX_LINES=10000

# ============================================================================
# Timelapse Configuration
# ============================================================================

# [OPTIONAL] Enable timelapse features (default: false)
# Requires FlickerFree or compatible timelapse system
TIMELAPSE_ENABLED=false

# [OPTIONAL] Source path for timelapse images (container path)
# TIMELAPSE_SOURCE_PATH=/app/data/timelapse-images

# [OPTIONAL] Output path for rendered timelapses (container path)
# TIMELAPSE_OUTPUT_PATH=/app/data/timelapses

# ============================================================================
# Security & CORS
# ============================================================================

# [UNUSED] Security configuration (planned for future multi-user features)
# SECRET_KEY=<will-be-required-for-authentication>
# ALLOWED_HOSTS=localhost,127.0.0.1
# SECURE_SSL_REDIRECT=false

# [OPTIONAL] CORS allowed origins (comma-separated, default: *)
# Only restrict if you need specific CORS policies
# CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# [OPTIONAL] Allow CORS credentials (default: true)
# CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# External Integrations (Optional)
# ============================================================================

# Redis Configuration (currently unused - planned for caching)
# [UNUSED] Redis URL (default: none)
# REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=
# REDIS_DB=0

# MQTT Configuration (currently unused - planned for HA integration)
# [UNUSED] MQTT broker settings
# MQTT_HOST=
# MQTT_PORT=1883
# MQTT_USERNAME=
# MQTT_PASSWORD=
# MQTT_DISCOVERY_PREFIX=homeassistant

# Email Configuration (currently unused - planned for alerts)
# [UNUSED] SMTP settings for email notifications
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASSWORD=
# SMTP_TLS=true
# EMAIL_FROM=

# Monitoring Configuration (currently unused - planned for metrics)
# [UNUSED] Prometheus and Sentry integration
# PROMETHEUS_ENABLED=false
# PROMETHEUS_PORT=8001
# SENTRY_DSN=
# SENTRY_ENVIRONMENT=production

# ============================================================================
# Usage Statistics (Privacy-First Telemetry - Opt-In Only)
# ============================================================================

# [OPTIONAL] Anonymous usage statistics collection (default: disabled)
# Enable via the Settings page in the web UI or set these variables

# [OPTIONAL] Statistics collection endpoint URL
# USAGE_STATS_ENDPOINT=http://80.240.28.236:8080/submit

# [REQUIRED for telemetry] API key for authenticating with the statistics server
# Contact the server administrator to obtain the API key
# USAGE_STATS_API_KEY=

# [OPTIONAL] HTTP request timeout in seconds (default: 10, range: 5-60)
# USAGE_STATS_TIMEOUT=10

# [OPTIONAL] Number of retry attempts for failed submissions (default: 3, range: 0-10)
# USAGE_STATS_RETRY_COUNT=3

# [OPTIONAL] Submission interval in days (default: 7, range: 1-30)
# USAGE_STATS_SUBMISSION_INTERVAL_DAYS=7

# ============================================================================
# GDPR & Compliance (currently unused - planned for future)
# ============================================================================

# [UNUSED] GDPR compliance features
# GDPR_ENABLED=true
# DATA_RETENTION_DAYS=2555  # 7 years for business records
# PRIVACY_POLICY_URL=
# COOKIE_CONSENT_REQUIRED=true

# ============================================================================
# Logging Configuration
# ============================================================================

# [OPTIONAL] Log format (json, text) (default: json)
# LOG_FORMAT=json

# [OPTIONAL] Log file path (container path, default: stdout)
# LOG_FILE=/app/logs/printernizer.log

# [OPTIONAL] Max log file size in MB before rotation (default: 100)
# LOG_MAX_SIZE_MB=100

# [OPTIONAL] Number of backup log files to keep (default: 5)
# LOG_BACKUP_COUNT=5

# ============================================================================
# Testing & Development
# ============================================================================

# [INTERNAL] Testing mode (auto-set by pytest)
# Do not manually set this variable
# TESTING=true

# [OPTIONAL] Development-only settings (ignored in production)
# DEV_RELOAD=false
# DEV_DEBUG_TOOLBAR=false
# DEV_PROFILER=false
